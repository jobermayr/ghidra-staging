From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: oh2erk <32195719+haarlaj@users.noreply.github.com>
Date: Fri, 12 Apr 2024 20:06:56 +0300
Subject: [PATCH] 6414: mz source get and set added to mz adjustSegmentStarts

---
 .../Base/src/main/java/ghidra/app/util/opinion/MzLoader.java    | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/opinion/MzLoader.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/opinion/MzLoader.java
index a26d9fd020..49470df397 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/opinion/MzLoader.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/opinion/MzLoader.java
@@ -294,10 +294,12 @@ public class MzLoader extends AbstractLibrarySupportLoader {
 					// split here and join to previous
 					Address splitAddr = offAddr.add(1);
 					String oldName = block.getName();
+					String oldSourceName = block.getSourceName();
 					memory.split(block, splitAddr);
 					memory.join(blocks[i - 1], blocks[i]);
 					blocks = memory.getBlocks();
 					blocks[i].setName(oldName);
+					blocks[i].setSourceName(oldSourceName);
 					break;
 				}
 			}
-- 
2.44.0

